<!DOCTYPE html>
<html ng-app="characters">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style/char.css">
    <link rel="stylesheet" type="text/css" href="style/stylicious.css">
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="scripts/angular.js"></script>
    <script type="text/javascript" src="scripts/characters.js"></script>
    <title>Characters</title>
</head>
<body ng-controller='charController as Peeps' ng-controller="pageController as page"   ng-init="page.secondarypage=0" ng-cloak class="ng-cloak" class="bork">
<nav class="navbar navbar-default navbar-fixed-top">
    <span class="glyphicon glyphicon-knight" aria-hidden="true"></span>
    <div class="container" ng-init="page.currentPage=1"  ng-show="page.secondarypage == 1">
        <ul class="nav nav-tabs nav-justified">
            <li role="presentation"><a href ng-click="page.currentPage = 1">Characters</a></li>
            <li role="presentation"><a href ng-click="page.currentPage = 2">MessageBoard</a></li>
            <li role="presentation"><a href ng-click="page.currentPage = 3">Messages</a></li>
        </ul>
    </div>
</nav>
<div class="col-sm-3 col-md-2 sidebar"  ng-controller="userController as userCon">
    <strong>email</strong>: {{user.local.email}}
    <!-- Button trigger modal -->

    <ul class="nav nav-pills nav-stacked">
       <li role="presentation">
           <a href ng-click="page.secondarypage = 0">Intro Page</a>
       </li>
        <li role="presentation">
            <a href ng-click="page.secondarypage = 1">Game Page</a>
        </li>
    </ul>

    <select id="room" class="form-control">
        <option ng-repeat="room in user.campaigns" value="{{room}}">{{room}}</option>
    </select>
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Add Room
    </button>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                </div>
                <div class="modal-body">
                    <form name="addRoom" class="charInput" ng-submit="userCon.addRoom()">
                        <fieldset class="form-group">
                            <label for="name">Add Room</label>
                            <input class="form-control" type="text" name="name" ng-model="userCon.newRoom">
                        </fieldset>
                </div>
                <div class="modal-footer">
                    <fieldset class="form-group">
                        <input type="submit" class="btn btn-primary pull-right" value="Add Room" data-dismiss="modal"/>
                    </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-show="page.secondarypage == 0">
    <h1>{{roomname}}</h1>
</div>
<div ng-show="page.secondarypage == 1">
    <div ng-show="page.currentPage == 1">

        <div class="panel panel-default greyness">
            <table class="table table-bordered table-striped mytable">
                <tr >
                    <td ng-repeat="stats in Peeps.stats">
                        {{stats}}
                    </td>
                </tr>
                <tr ng-repeat="chars in Peeps.characters| filter:search">
                    <td ng-repeat="stats in chars.stats">
                        {{stats}}
                    </td>
                </tr>
            </table>
            <label for="searcher" class="search">Search</label>
            <input ng-model="search" name="searcher" class="form-control search"/>
        </div>
        <div class="panel panel-default greyness">
            <form name="addChar" ng-controller="charAdder as char" class="charInput" ng-submit="char.addCharacter(Peeps)"
                  ng-show="page.currentPage == 1">
                <fieldset ng-repeat="stats in Peeps.stats" class="form-group">
                    <label for="name">{{stats}}</label>
                    <input class="form-control" type="text" name="name"  ng-model="char.character.stats[$index]">
                </fieldset>
                <fieldset class="form-group">
                    <input type="submit" class="btn btn-primary pull-right" value="Submit Character"/>
                </fieldset>
            </form>
        </div>
    </div>
    <div ng-show="page.currentPage == 2" ng-controller="imgController as images">
        <div class="panel panel-default imageThing">
            <form name="poster" class="charInput" ng-controller="imageAdder as something"
                  ng-submit="something.addImage(images)">
                <fieldset>
                    <label for="Image">Image Link</label>
                    <input class="form-control" type="text" name="Image" ng-model="something.tempImage"/>
                </fieldset>
                <fieldset>
                    <label for="Title">Post Title</label>
                    <input class="form-control" type="text" name="Title" ng-model="something.tempTitle"/>
                </fieldset>
                <fieldset>
                    <label for="Text">Post Content</label>
                    <input class="form-control" type="text" name="Text" ng-model="something.tempText"/>
                </fieldset>
                <fieldset class="form-group">
                    <input type="submit" class="btn  pull-right" value="Post"/>
                </fieldset>
            </form>
        </div>
        <div ng-repeat="posts in post">
            <div class="panel panel-default greyness">
                <h2>{{posts.title}}</h2>
                <img class="instaImages" ng-src="{{posts.image}}"/>
                <p>{{posts.text}}</p>
            </div>
        </div>
        <div id="postBox"></div>
    </div>
    <div ng-show="page.currentPage == 3" ng-controller="chatter as chat">
        <div class="container">
            <div class="chat" id="chatbox">
            </div>
            <form id="watid" action="">
                <div class="form-group">
                    <input class="form-control" id="m" autocomplete="off"/>
                    <button class="btn btn-default btn-lg center">Send</button>
                </div>
            </form>
            <button class="btn btn-default" id="send" type="button">Clear chat!</button>
        </div>
    </div>
</div>
</body>
</html>
